<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Edit Transaction</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
<h1>Edit Transaction</h1>
<form method="POST">
<div class="mb-2">
<label>Description</label>
<input type="text" name="description" class="form-control" value="{{ tx[2] }}" required>
</div>
<div class="mb-2">
<label>Amount</label>
<input type="number" step="0.01" name="amount" class="form-control" value="{{ tx[3] }}" required>
</div>
<div class="mb-2">
<label>Type</label>
<select name="type" class="form-select" required>
<option value="Income" {% if tx[1]=='Income' %}selected{% endif %}>Income</option>
<option value="Expense" {% if tx[1]=='Expense' %}selected{% endif %}>Expense</option>
</select>
</div>
<div class="mb-2">
<label>Date</label>
<input type="date" name="date" class="form-control" value="{{ tx[4] }}" required>
</div>
<div class="mb-2">
<label>Recurring</label>
<select name="recurring" class="form-select" id="recurring-edit-select" required>
<option value="One-time" {% if tx[5]=='One-time' %}selected{% endif %}>One-time</option>
<option value="Recurring" {% if tx[5]=='Recurring' %}selected{% endif %}>Recurring</option>
</select>
</div>
<div class="mb-2" id="frequency-edit-container" style="display:{% if tx[5]=='Recurring' %}block{% else %}none{% endif %};">
<label>Frequency</label>
<select name="frequency" class="form-select">
<option value="Weekly" {% if tx[6]=='Weekly' %}selected{% endif %}>Weekly</option>
<option value="Biweekly" {% if tx[6]=='Biweekly' %}selected{% endif %}>Biweekly</option>
<option value="Monthly" {% if tx[6]=='Monthly' %}selected{% endif %}>Monthly</option>
<option value="Yearly" {% if tx[6]=='Yearly' %}selected{% endif %}>Yearly</option>
</select>
</div>
<button type="submit" class="btn btn-primary">Update</button>
<a href="{{ url_for('index') }}" class="btn btn-secondary">Cancel</a>
<script>
const recurringEditSelect = document.getElementById("recurring-edit-select");
const freqEditContainer = document.getElementById("frequency-edit-container");
recurringEditSelect.addEventListener('change', () => {
    freqEditContainer.style.display = recurringEditSelect.value==='Recurring'?'block':'none';
});
</script>
</body>
</html>
